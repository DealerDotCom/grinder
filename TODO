-*- mode:outline; minor-mode:outl-mouse -*-

If anyone wants to pick something off this wish list, let me know
first. I prefer unified diff patches. Mail them to
grinder-development@lists.sourceforge.net.

The wish list is part of the distribution, I'll accept patches against
it too :-).

- Phil


* Bugs

** Sourceforge 690639
http://sourceforge.net/tracker/index.php?func=detail&aid=690639&group_id=18598&atid=118598

    request175 = HTTPRequest(headers = headers174)

    tests[175] = Test(175, 'GET leftarrow.gif').wrap(request175)

    headers174 = ( NVPair('Accept', '*/*'),
    # ...

headers174 should have been flushed to the output before test 175.

Its down to the multithread nature of the recording (there is usually more than one connection and we handle each connection with a thread).  Smarter synchronisation is required.

** Sourceforge 611114 
http://sourceforge.net/tracker/index.php?func=detail&aid=611114&group_id=18598&atid=118598

- use tomcat 4.1.10
- use grinder 2.8.3
- nt plattform
- use TCPSniffer to record login into tomcat's admin
console (admin/login.jsp)
- then playback via grinder

it cannot deal with j_security_check: 18.09.02 16:14:03: (thread 0
cycle 24 test 6) Unknown response code: 400 (Invalid direct reference
to form login page) for http://localhost/admin/j_security_check

** Sourceforge 691728
http://sourceforge.net/tracker/index.php?func=detail&aid=691728&group_id=18598&atid=118598

Grinder script was auto-generated with TCPProxy, when
creating script typical delay on the user side was 1-10
seconds, however, in the script, there are commands
inserted that make the Grinder to fall asleep even for an
hour, e.g. sleep(4348063)

** That EOF and retries thing

http://sourceforge.net/mailarchive/message.php?msg_id=2027628
http://sourceforge.net/mailarchive/message.php?msg_id=3626264

** TCP Proxy

Sniffer vs redirection. Think there are some bugs here.

Recording \n's?

When visting xweb.sf.net via proxy and then going back to main page,
the target servers get foobared.

Fix the proxy to record Authorization again. Can use connection ID.
The G2 HTTPClient plugin implementation interprets basicAuthentication
properties wrongly. It first sends a request without the
authentication headers, then catches the 401 and automatically resends
a request with the authentication headers.

*** Query strings

Ryan_Balsam@chcmail.com writes:
 > 
 > I believe that this is the output you requested. Is the format of
 > the session id in the url causing the problem? If so, what can I do
 > to get around this issue. Thanks in advance.
 > 
 > --- localhost:2398->www.qa.columbiahouse.com:80 opened --
 > --- www.qa.columbiahouse.com:80->localhost:2398 opened --
 > ------ localhost:2398->www.qa.columbiahouse.com:80 ------
 > GET http://www.qa.columbiahouse.com/cl1/ch/homepage.jsp?
 > &init_flag=1&dt=1046472967647&pin=40&bak=41&wl_sid=Pl1pBwdYvc6orH7N1qC7we4tCfE5UcH1F0hVHpN9Pdw0MkOtD9aS|7840758981801063487/184354344/6/80/80/7002/7002/80/-1|-5204672580245477377/184354345/6/80/80/7002/7002/80/-1

OK, having tried the site myself I find it uses query strings which
The Grinder considers invalid.

For example:

	http://test.coremetrics.com/eluminate?pt%3DC%26vn1%3De2.5%26pn%3DCH-MAIN%253A/ch/homepage.jsp%26pi%3DCH-MAIN%253A/ch/homepage.jsp%26ul%3D/ch/homepage.jsp%26se%3D%26ci%3D90001000%26rf%3Dhttp%253A//www.qa.columbiahouse.com/cl1/ch/authentication/signIn.jsp%253F%2526dt%253D1047817034980%2526pin%253D40%2526bak%253D42%2526wl_sid%253DPnRrSgZD4KelkenRAsto2dblWXviivmj9KtBeUt9KTKlCJB1x6M1%257C-850425960992501384/184354344/6/80/80/7002/7002/80/-1%257C-6016861855175717169/184354346/6/80/80/7002/7002/80/-1%26pc%3DYes%26ts%3DYes%26tp%3DYes%26rnd%3D7383440

and
	 http://a248.e.akamai.net/f/1596/1167/1d/images.columbiahouse.com/ch/images/se2/homepage/rotating/dvd_02.jpg?03100

The Grinder TCPProxy expects query strings to be name-value pairs
(e.g. ?a=1&b=2). Having checked the RFC's I find that, whilst query
strings usually contain name-value pairs, it is not mandatory.

Interestingly the first of these examples becomes a "normal" query
string if un-escaped. I don't think its right for the TCPProxy to do
this un-escaping however.

I'll fix the TCPProxy to be relaxed about these query strings. Thanks
for the report.


* Enhancements

** Ambitious
Measure test variance. This would involve the console broadcasting the
total mean, and then listening for the reported variance.

** Console

Respond to change of test description and so on.

** TCPProxy

TCPProxy should be able to work through proxies.

Change TCP sniffer filters to a stream oriented model. This should
cure another one of the TCPSniffer/HTTPPlugin bug when recording large
outputs with posts? Also, consider having a filter instance pair per
connection.

** HTTP Plugin

Authorisation tear down

HTTP plugin to support "mean time to first byte".

** Scripting

Add per-run statistics. This would also allow number of aborted runs
to be recorded.

Script access to global statistics.


*** Error reporting

 > It would be possible for certain classes of error (AttributeError
 > being a good example) to spew out just
 > 
 >       Unknown attribute GETx at "http.py", line 9 in __call__.
 > 
 > Is this what you're after?
^^ To do this, might have to behave differently with 1 thread vs many.


* Build

Incorporate checkstyle.
 Compliant packages:
	net.grinder
	net.grinder.common
	net.grinder.console.model
	net.grinder.engine
	net.grinder.engine.agent
	net.grinder.engine.process
	net.grinder.script
	net.grinder.statistics

Find out how to stop net.grinder.console.swing.TestGraph from
preventing parent process from detecting exit status. (For example,
when used with the JUnit plugin). Surely System.exit() is not the
answer?


* Documentation

Overview process diagram. Animated?
HTTP plug-in.
TCPProxy and G3.

Viewlet demo?

** Examples

Using grinder.properties from scripts.

HTTPS.

Basic authentication.


