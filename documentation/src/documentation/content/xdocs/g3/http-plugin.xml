<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN" "http://forrest.apache.org/dtd/document-v20.dtd">

<document>
<header>
  <title>The HTTP Plug-in</title>
</header>

<body>

  <fixme author="PA">Material to come! For now see the <a
  href="script-javadoc/index.html">script API</a>, the <a
  href="site:script-gallery">script gallery</a> and Richard Perks' <a
  href="site:tutorial">tutorial</a>.</fixme>

  <warning>Draft material follows.</warning>

  <section>
    <title>Using a HTTP proxy</title>

<source>
control = HTTPPluginControl.getConnectionDefaults()
control.setProxyServer("localhost", 8001)
</source>
  </section>

  <section>
    <title>Setting HTTP proxy authentication:</title>

<source>
AuthorizationInfo.addBasicAuthorization("localhost",
    8001, "proxyrealm", "proxyusername", "proxypassword",
    HTTPPluginControl.getHTTPClientContext())
</source>

    <p>Must be done from a worker thread.</p>
  </section>

  <section>
    <title>Disabling persistent connections</title>
<source>
control = HTTPPluginControl.getConnectionDefaults()
control.setDefaultHeaders(NVPair("Connection", "close"),))
</source>
   </section>

  <section>
    <title>Recording of HTTP status codes</title>

    <p>If an <code>HTTPRequest</code> is wrapped in a
    <code>Test</code>, the HTTP response status codes for each call of
    the <code>HTTPRequest</code> are recorded to the process data log.
    If multiple <code>HTTPRequests</code> are wrapped in a
    <code>Test</code>, the status code of the last response is
    recorded.</p>
  </section>
</body>
</document>
